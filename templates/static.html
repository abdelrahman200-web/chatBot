{% extends 'nav_bar.html' %}
{% block title %}📊 إحصائيات البوت | WhatsApp Bot{% endblock %}
{% block content %}
<link rel="stylesheet" href="../static/stats.css">
<style>
    /* 📌 تصميم صفحة الإحصائيات */
.container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
    font-family: "Arial", sans-serif;
}

.title {
    text-align: center;
    font-size: 24px;
    margin-bottom: 20px;
    color: #2c3e50;
}

/* 📊 تنسيق الكروت */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
}

.stats-card {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.stats-card h3 {
    font-size: 18px;
    margin-bottom: 10px;
    color: #2980b9;
}

.stats-card ul {
    padding: 0;
    list-style-type: none;
}

.stats-card ul li {
    padding: 5px 0;
    border-bottom: 1px solid #ddd;
}

.stats-card ul li:last-child {
    border-bottom: none;
}

/* 🌍 تنسيق الدول */
.stats-card strong {
    color: #16a085;
}

</style>
<div class="container">
    <h2 class="title">📊 إحصائيات البوت</h2>

    <div class="stats-grid">
        <div class="stats-card">
            <h3>📅 المستخدمون الجدد</h3>
            <p><strong>اليوم:</strong> {{ stats.new_users_daily }}</p>
            <p><strong>هذا الأسبوع:</strong> {{ stats.new_users_weekly }}</p>
            <p><strong>هذا الشهر:</strong> {{ stats.new_users_monthly }}</p>
            <p><strong>هذه السنة:</strong> {{ stats.new_users_yearly }}</p>
        </div>

        <div class="stats-card">
            <h3>📂 أكثر التصنيفات طلبًا</h3>
            <ul>
                {% for category in stats.category_requests %}
                <li><strong>{{ category[0] }}</strong> - {{ category[1] }} طلب</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stats-card">
            <h3>❗ أكثر المشاكل طلبًا</h3>
            <ul>
                {% for issue in stats.issue_requests %}
                <li><strong>{{ issue[0] }}</strong> - {{ issue[1] }} طلب</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stats-card">
            <h3>🌍 أكثر الدول تفاعلاً</h3>
            <ul>
                {% for country in stats.top_country %}
                <li><strong>{{ country[0] }}</strong> - {{ country[1] }} طلب</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stats-card">
            <h3>📞 أكثر المستخدمين نشاطًا</h3>
            <ul>
                {% for user in stats.top_users %}
                <li><strong>{{ user[0] }}</strong> - {{ user[1] }} طلب</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}
