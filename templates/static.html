{% extends 'nav_bar.html' %}
{% block title %}📊 إحصائيات البوت | WhatsApp Bot{% endblock %}
{% block content %}
<link rel="stylesheet" href="../static/stats.css">
<div class="container">
    <h2 class="title">📊 إحصائيات البوت</h2>

    <div class="stats-grid">
        <div class="stats-card">
            <h3>📅 المستخدمون الجدد</h3>
            <p><strong>اليوم:</strong> {{ stats.new_users_daily }}</p>
            <p><strong>هذا الأسبوع:</strong> {{ stats.new_users_weekly }}</p>
            <p><strong>هذا الشهر:</strong> {{ stats.new_users_monthly }}</p>
            <p><strong>هذه السنة:</strong> {{ stats.new_users_yearly }}</p>
        </div>

        <div class="stats-card">
            <h3>📂 أكثر التصنيفات طلبًا</h3>
            <ul>
                {% for category in stats.category_requests %}
                <li><strong>{{ category[0] }}</strong> - {{ category[1] }} طلب</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stats-card">
            <h3>❗ أكثر المشاكل طلبًا</h3>
            <ul>
                {% for issue in stats.issue_requests %}
                <li><strong>{{ issue[0] }}</strong> - {{ issue[1] }} طلب</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stats-card">
            <h3>🌍 أكثر الدول تفاعلاً</h3>
            <ul>
                {% for country in stats.top_country %}
                <li><strong>{{ country[0] }}</strong> - {{ country[1] }} طلب</li>
                {% endfor %}
            </ul>
        </div>

        <div class="stats-card">
            <h3>📞 أكثر المستخدمين نشاطًا</h3>
            <ul>
                {% for user in stats.top_users %}
                <li>
                    <strong>{{ user[0] }}</strong> - 
                    📍 {{ user[1] }} -  <!-- ✅ عرض المنطقة -->
                    {{ user[2] }} طلب
                </li>
                {% endfor %}
            </ul>
        </div>
        
                <div class="stats-card">
            <h3>📋 أكثر الخيارات طلبًا</h3>
        <ul>
         {% for option in stats.most_requested_options %}
         <li>
        {% if option[0] == "safety" %}
            🔹 تعليمات السلامة - {{ option[1] }} طلب
        {% elif option[0] == "work" %}
            📂 تعليمات العمل - {{ option[1] }} طلب
        {% elif option[0] == "error_codes" %}
            ⚠️ رموز أخطاء فيترونيك - {{ option[1] }} طلب
        {% endif %}
          </li>
         {% endfor %}
        </ul>
        </div>
        <div class="stats-card">
            <h3>📍 أكثر الأماكن تفاعلًا</h3>
        <ul>
             {% for region in stats.top_regions %}
         <li>📍 {{ region[0] }} - {{ region[1] }} طلب</li>
             {% endfor %}
        </ul>

        </div>
    </div>
</div>
{% endblock %}
